<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KuGouApp: Dynamic Array</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="windowIcon.ico"/></td>
  <td id="projectalign">
   <div id="projectname">KuGouApp<span id="projectnumber">&#160;beta 0.01</span>
   </div>
   <div id="projectbrief">KuGouDocs build by doxygen</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__lavu__mem__dynarray.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">函数</a>  </div>
  <div class="headertitle"><div class="title">Dynamic Array<div class="ingroups"><a class="el" href="group__lavu.html">libavutil</a> &raquo; <a class="el" href="group__lavu__mem.html">Memory Management</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Utilities to make an array grow when needed.  
<a href="#details">更多...</a></p>
<div class="dynheader">
Dynamic Array 的协作图:</div>
<div class="dyncontent">
<div class="center"><img src="group__lavu__mem__dynarray.png" border="0" usemap="#agroup____lavu____mem____dynarray" alt=""/></div>
<map name="agroup____lavu____mem____dynarray" id="agroup____lavu____mem____dynarray">
<area shape="rect" href="group__lavu__mem.html" title="Utilities for manipulating memory." alt="" coords="5,5,153,32"/>
<area shape="rect" title="Utilities to make an array grow when needed." alt="" coords="201,5,308,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:ga385b582522cedf5a88ce2cf158c396c9" id="r_ga385b582522cedf5a88ce2cf158c396c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga385b582522cedf5a88ce2cf158c396c9">av_dynarray_add</a> (<a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *tab_ptr, int *nb_ptr, <a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *elem)</td></tr>
<tr class="memdesc:ga385b582522cedf5a88ce2cf158c396c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the pointer to an element to a dynamic array.  <br /></td></tr>
<tr class="separator:ga385b582522cedf5a88ce2cf158c396c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e3735b4568e78fffd7c4ea2f793996e" id="r_ga5e3735b4568e78fffd7c4ea2f793996e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a93f17e0f0b53a66e7b5eceb3dff2918f">av_warn_unused_result</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5e3735b4568e78fffd7c4ea2f793996e">av_dynarray_add_nofree</a> (<a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *tab_ptr, int *nb_ptr, <a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *elem)</td></tr>
<tr class="memdesc:ga5e3735b4568e78fffd7c4ea2f793996e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an element to a dynamic array.  <br /></td></tr>
<tr class="separator:ga5e3735b4568e78fffd7c4ea2f793996e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3065fcfabfeff13806c455b7e56300b0" id="r_ga3065fcfabfeff13806c455b7e56300b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3065fcfabfeff13806c455b7e56300b0">av_dynarray2_add</a> (<a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> **tab_ptr, int *nb_ptr, size_t elem_size, <a class="el" href="zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="_s_d_l__config__ngage_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *elem_data)</td></tr>
<tr class="memdesc:ga3065fcfabfeff13806c455b7e56300b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an element of size <code>elem_size</code> to a dynamic array.  <br /></td></tr>
<tr class="separator:ga3065fcfabfeff13806c455b7e56300b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<p>Utilities to make an array grow when needed. </p>
<p>Sometimes, the programmer would want to have an array that can grow when needed. The libavutil dynamic array utilities fill that need.</p>
<p>libavutil supports two systems of appending elements onto a dynamically allocated array, the first one storing the pointer to the value in the array, and the second storing the value directly. In both systems, the caller is responsible for maintaining a variable containing the length of the array, as well as freeing of the array after use.</p>
<p>The first system stores pointers to values in a block of dynamically allocated memory. Since only pointers are stored, the function does not need to know the size of the type. Both <a class="el" href="#ga385b582522cedf5a88ce2cf158c396c9" title="Add the pointer to an element to a dynamic array.">av_dynarray_add()</a> and <a class="el" href="#ga5e3735b4568e78fffd7c4ea2f793996e" title="Add an element to a dynamic array.">av_dynarray_add_nofree()</a> implement this system.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a> **<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a> = <a class="code hl_define" href="begin__code_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">//&lt; an array of pointers to values</span></div>
<div class="line"><span class="keywordtype">int</span>    nb    = 0;    <span class="comment">//&lt; a variable to keep track of the length of the array</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a> to_be_added  = ...;</div>
<div class="line"><a class="code hl_typedef" href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a> to_be_added2 = ...;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="#ga385b582522cedf5a88ce2cf158c396c9">av_dynarray_add</a>(&amp;<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a>, &amp;nb, &amp;to_be_added);</div>
<div class="line"><span class="keywordflow">if</span> (nb == 0)</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="#ga385b582522cedf5a88ce2cf158c396c9">av_dynarray_add</a>(&amp;<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a>, &amp;nb, &amp;to_be_added2);</div>
<div class="line"><span class="keywordflow">if</span> (nb == 0)</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Now:</span></div>
<div class="line"><span class="comment">//  nb           == 2</span></div>
<div class="line"><span class="comment">// &amp;to_be_added  == array[0]</span></div>
<div class="line"><span class="comment">// &amp;to_be_added2 == array[1]</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__lavu__mem__funcs.html#ga0cc84043ea2167ad005c86e11d0bcdba">av_freep</a>(&amp;<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a>);</div>
<div class="ttc" id="a_s_d_l__opengl_8h_html_ad5ddf6fca7b585646515660e810e0188"><div class="ttname"><a href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a></div><div class="ttdeci">GLuint GLuint GLsizei GLenum type</div><div class="ttdef"><b>定义</b> SDL_opengl.h:1571</div></div>
<div class="ttc" id="a_s_d_l__opengl__glext_8h_html_a52f38e7d822a46377fde7a02708eedb1"><div class="ttname"><a href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a></div><div class="ttdeci">GLenum array</div><div class="ttdef"><b>定义</b> SDL_opengl_glext.h:7307</div></div>
<div class="ttc" id="abegin__code_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="begin__code_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>定义</b> begin_code.h:165</div></div>
<div class="ttc" id="agroup__lavu__error_html_gae4bb6f165973d09584e0ec0f335f69ca"><div class="ttname"><a href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a></div><div class="ttdeci">#define AVERROR(e)</div><div class="ttdef"><b>定义</b> error.h:43</div></div>
<div class="ttc" id="agroup__lavu__mem__dynarray_html_ga385b582522cedf5a88ce2cf158c396c9"><div class="ttname"><a href="#ga385b582522cedf5a88ce2cf158c396c9">av_dynarray_add</a></div><div class="ttdeci">void av_dynarray_add(void *tab_ptr, int *nb_ptr, void *elem)</div><div class="ttdoc">Add the pointer to an element to a dynamic array.</div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga0cc84043ea2167ad005c86e11d0bcdba"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga0cc84043ea2167ad005c86e11d0bcdba">av_freep</a></div><div class="ttdeci">void av_freep(void *ptr)</div><div class="ttdoc">Free a memory block which has been allocated with a function of av_malloc() or av_realloc() family,...</div></div>
</div><!-- fragment --><p>The second system stores the value directly in a block of memory. As a result, the function has to know the size of the type. <a class="el" href="#ga3065fcfabfeff13806c455b7e56300b0" title="Add an element of size elem_size to a dynamic array.">av_dynarray2_add()</a> implements this mechanism.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a> *<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a> = <a class="code hl_define" href="begin__code_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">//&lt; an array of values</span></div>
<div class="line"><span class="keywordtype">int</span>   nb    = 0;    <span class="comment">//&lt; a variable to keep track of the length of the array</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a> to_be_added  = ...;</div>
<div class="line"><a class="code hl_typedef" href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a> to_be_added2 = ...;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a> *<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a74558cb2034ec88c1188d64a77bd3bac">addr</a> = <a class="code hl_function" href="#ga3065fcfabfeff13806c455b7e56300b0">av_dynarray2_add</a>((<span class="keywordtype">void</span> **)&amp;<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a>, &amp;nb, <span class="keyword">sizeof</span>(*<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a>), <a class="code hl_define" href="begin__code_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><span class="keywordflow">if</span> (!<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a74558cb2034ec88c1188d64a77bd3bac">addr</a>)</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div>
<div class="line">memcpy(<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a74558cb2034ec88c1188d64a77bd3bac">addr</a>, &amp;to_be_added, <span class="keyword">sizeof</span>(to_be_added));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Shortcut of the above.</span></div>
<div class="line"><a class="code hl_typedef" href="_s_d_l__opengl_8h.html#ad5ddf6fca7b585646515660e810e0188">type</a> *<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a74558cb2034ec88c1188d64a77bd3bac">addr</a> = <a class="code hl_function" href="#ga3065fcfabfeff13806c455b7e56300b0">av_dynarray2_add</a>((<span class="keywordtype">void</span> **)&amp;<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a>, &amp;nb, <span class="keyword">sizeof</span>(*<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a>),</div>
<div class="line">                              (<span class="keyword">const</span> <span class="keywordtype">void</span> *)&amp;to_be_added2);</div>
<div class="line"><span class="keywordflow">if</span> (!<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a74558cb2034ec88c1188d64a77bd3bac">addr</a>)</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Now:</span></div>
<div class="line"><span class="comment">//  nb           == 2</span></div>
<div class="line"><span class="comment">//  to_be_added  == array[0]</span></div>
<div class="line"><span class="comment">//  to_be_added2 == array[1]</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__lavu__mem__funcs.html#ga0cc84043ea2167ad005c86e11d0bcdba">av_freep</a>(&amp;<a class="code hl_typedef" href="_s_d_l__opengl__glext_8h.html#a52f38e7d822a46377fde7a02708eedb1">array</a>);</div>
<div class="ttc" id="a_s_d_l__opengl__glext_8h_html_a74558cb2034ec88c1188d64a77bd3bac"><div class="ttname"><a href="_s_d_l__opengl__glext_8h.html#a74558cb2034ec88c1188d64a77bd3bac">addr</a></div><div class="ttdeci">GLenum const void * addr</div><div class="ttdef"><b>定义</b> SDL_opengl_glext.h:9255</div></div>
<div class="ttc" id="agroup__lavu__mem__dynarray_html_ga3065fcfabfeff13806c455b7e56300b0"><div class="ttname"><a href="#ga3065fcfabfeff13806c455b7e56300b0">av_dynarray2_add</a></div><div class="ttdeci">void * av_dynarray2_add(void **tab_ptr, int *nb_ptr, size_t elem_size, const uint8_t *elem_data)</div><div class="ttdoc">Add an element of size elem_size to a dynamic array.</div></div>
</div><!-- fragment --> <h2 class="groupheader">函数说明</h2>
<a id="ga3065fcfabfeff13806c455b7e56300b0" name="ga3065fcfabfeff13806c455b7e56300b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3065fcfabfeff13806c455b7e56300b0">&#9670;&#160;</a></span>av_dynarray2_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> * av_dynarray2_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> **</td>          <td class="paramname"><span class="paramname"><em>tab_ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>nb_ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>elem_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="_s_d_l__config__ngage_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *</td>          <td class="paramname"><span class="paramname"><em>elem_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an element of size <code>elem_size</code> to a dynamic array. </p>
<p>The array is reallocated when its number of elements reaches powers of 2. Therefore, the amortized cost of adding an element is constant.</p>
<p>In case of success, the pointer to the array is updated in order to point to the new grown array, and the number pointed to by <code>nb_ptr</code> is incremented. In case of failure, the array is freed, <code>*tab_ptr</code> is set to <code>NULL</code> and <code>*nb_ptr</code> is set to 0.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tab_ptr</td><td>Pointer to the array to grow </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">nb_ptr</td><td>Pointer to the number of elements in the array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elem_size</td><td>Size in bytes of an element in the array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elem_data</td><td>Pointer to the data of the element to add. If <code>NULL</code>, the space of the newly added element is allocated but left uninitialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>Pointer to the data of the element to copy in the newly allocated space </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="#ga385b582522cedf5a88ce2cf158c396c9" title="Add the pointer to an element to a dynamic array.">av_dynarray_add()</a>, <a class="el" href="#ga5e3735b4568e78fffd7c4ea2f793996e" title="Add an element to a dynamic array.">av_dynarray_add_nofree()</a> </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__lavu__mem__dynarray_ga3065fcfabfeff13806c455b7e56300b0_cgraph.png" border="0" usemap="#agroup__lavu__mem__dynarray_ga3065fcfabfeff13806c455b7e56300b0_cgraph" alt=""/></div>
<map name="agroup__lavu__mem__dynarray_ga3065fcfabfeff13806c455b7e56300b0_cgraph" id="agroup__lavu__mem__dynarray_ga3065fcfabfeff13806c455b7e56300b0_cgraph">
<area shape="rect" title="Add an element of size elem_size to a dynamic array." alt="" coords="5,29,133,56"/>
<area shape="poly" title=" " alt="" coords="46,30,43,21,45,11,54,5,69,3,85,5,93,12,90,16,83,10,69,8,56,10,50,14,48,20,51,28"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__lavu__mem__dynarray_ga3065fcfabfeff13806c455b7e56300b0_icgraph.png" border="0" usemap="#agroup__lavu__mem__dynarray_ga3065fcfabfeff13806c455b7e56300b0_icgraph" alt=""/></div>
<map name="agroup__lavu__mem__dynarray_ga3065fcfabfeff13806c455b7e56300b0_icgraph" id="agroup__lavu__mem__dynarray_ga3065fcfabfeff13806c455b7e56300b0_icgraph">
<area shape="rect" title="Add an element of size elem_size to a dynamic array." alt="" coords="5,29,133,56"/>
<area shape="poly" title=" " alt="" coords="90,16,83,10,69,8,56,10,50,14,48,20,51,28,46,30,43,21,45,11,54,5,69,3,85,5,93,12"/>
</map>
</div>

</div>
</div>
<a id="ga385b582522cedf5a88ce2cf158c396c9" name="ga385b582522cedf5a88ce2cf158c396c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga385b582522cedf5a88ce2cf158c396c9">&#9670;&#160;</a></span>av_dynarray_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> av_dynarray_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *</td>          <td class="paramname"><span class="paramname"><em>tab_ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>nb_ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *</td>          <td class="paramname"><span class="paramname"><em>elem</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the pointer to an element to a dynamic array. </p>
<p>The array to grow is supposed to be an array of pointers to structures, and the element to add must be a pointer to an already allocated structure.</p>
<p>The array is reallocated when its size reaches powers of 2. Therefore, the amortized cost of adding an element is constant.</p>
<p>In case of success, the pointer to the array is updated in order to point to the new grown array, and the number pointed to by <code>nb_ptr</code> is incremented. In case of failure, the array is freed, <code>*tab_ptr</code> is set to <code>NULL</code> and <code>*nb_ptr</code> is set to 0.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tab_ptr</td><td>Pointer to the array to grow </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">nb_ptr</td><td>Pointer to the number of elements in the array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elem</td><td>Element to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="#ga5e3735b4568e78fffd7c4ea2f793996e" title="Add an element to a dynamic array.">av_dynarray_add_nofree()</a>, <a class="el" href="#ga3065fcfabfeff13806c455b7e56300b0" title="Add an element of size elem_size to a dynamic array.">av_dynarray2_add()</a> </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__lavu__mem__dynarray_ga385b582522cedf5a88ce2cf158c396c9_cgraph.png" border="0" usemap="#agroup__lavu__mem__dynarray_ga385b582522cedf5a88ce2cf158c396c9_cgraph" alt=""/></div>
<map name="agroup__lavu__mem__dynarray_ga385b582522cedf5a88ce2cf158c396c9_cgraph" id="agroup__lavu__mem__dynarray_ga385b582522cedf5a88ce2cf158c396c9_cgraph">
<area shape="rect" title="Add the pointer to an element to a dynamic array." alt="" coords="5,29,126,56"/>
<area shape="poly" title=" " alt="" coords="44,30,40,20,43,11,52,5,66,3,81,5,89,12,85,16,78,10,65,8,54,10,47,14,46,20,49,28"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__lavu__mem__dynarray_ga385b582522cedf5a88ce2cf158c396c9_icgraph.png" border="0" usemap="#agroup__lavu__mem__dynarray_ga385b582522cedf5a88ce2cf158c396c9_icgraph" alt=""/></div>
<map name="agroup__lavu__mem__dynarray_ga385b582522cedf5a88ce2cf158c396c9_icgraph" id="agroup__lavu__mem__dynarray_ga385b582522cedf5a88ce2cf158c396c9_icgraph">
<area shape="rect" title="Add the pointer to an element to a dynamic array." alt="" coords="5,29,126,56"/>
<area shape="poly" title=" " alt="" coords="85,16,78,10,65,8,54,10,47,14,46,20,49,28,44,30,40,20,43,11,52,5,66,3,81,5,89,12"/>
</map>
</div>

</div>
</div>
<a id="ga5e3735b4568e78fffd7c4ea2f793996e" name="ga5e3735b4568e78fffd7c4ea2f793996e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5e3735b4568e78fffd7c4ea2f793996e">&#9670;&#160;</a></span>av_dynarray_add_nofree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="attributes_8h.html#a93f17e0f0b53a66e7b5eceb3dff2918f">av_warn_unused_result</a> int av_dynarray_add_nofree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *</td>          <td class="paramname"><span class="paramname"><em>tab_ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>nb_ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_s_d_l__opengl_8h.html#a46df6112013cf583e82b25cebd5cb499">void</a> *</td>          <td class="paramname"><span class="paramname"><em>elem</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an element to a dynamic array. </p>
<p>Function has the same functionality as <a class="el" href="#ga385b582522cedf5a88ce2cf158c396c9" title="Add the pointer to an element to a dynamic array.">av_dynarray_add()</a>, but it doesn't free memory on fails. It returns error code instead and leave current buffer untouched.</p>
<dl class="section return"><dt>返回</dt><dd>&gt;=0 on success, negative otherwise </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="#ga385b582522cedf5a88ce2cf158c396c9" title="Add the pointer to an element to a dynamic array.">av_dynarray_add()</a>, <a class="el" href="#ga3065fcfabfeff13806c455b7e56300b0" title="Add an element of size elem_size to a dynamic array.">av_dynarray2_add()</a> </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="group__lavu__mem__dynarray_ga5e3735b4568e78fffd7c4ea2f793996e_cgraph.png" border="0" usemap="#agroup__lavu__mem__dynarray_ga5e3735b4568e78fffd7c4ea2f793996e_cgraph" alt=""/></div>
<map name="agroup__lavu__mem__dynarray_ga5e3735b4568e78fffd7c4ea2f793996e_cgraph" id="agroup__lavu__mem__dynarray_ga5e3735b4568e78fffd7c4ea2f793996e_cgraph">
<area shape="rect" title="Add an element to a dynamic array." alt="" coords="5,29,169,56"/>
<area shape="poly" title=" " alt="" coords="59,30,54,21,57,11,69,5,87,3,107,5,117,12,114,16,105,10,87,8,70,10,61,15,59,20,63,28"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="group__lavu__mem__dynarray_ga5e3735b4568e78fffd7c4ea2f793996e_icgraph.png" border="0" usemap="#agroup__lavu__mem__dynarray_ga5e3735b4568e78fffd7c4ea2f793996e_icgraph" alt=""/></div>
<map name="agroup__lavu__mem__dynarray_ga5e3735b4568e78fffd7c4ea2f793996e_icgraph" id="agroup__lavu__mem__dynarray_ga5e3735b4568e78fffd7c4ea2f793996e_icgraph">
<area shape="rect" title="Add an element to a dynamic array." alt="" coords="5,29,169,56"/>
<area shape="poly" title=" " alt="" coords="114,16,105,10,87,8,70,10,61,15,59,20,63,28,59,30,54,21,57,11,69,5,87,3,107,5,117,12"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
